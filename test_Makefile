# Test Makefile for ft_printf
# This Makefile compiles and runs the test program to verify ft_printf functionality

# Test program name
NAME = test

# Library name (the ft_printf library we're testing)
LIB = libftprintf.a

# Compiler and flags (same as main Makefile)
CC = cc
CFLAGS = -Wall -Wextra -Werror

# Source files for the test program
SRCS = test.c

# Object files for the test program
OBJS = $(SRCS:.c=.o)

# Default target: build both library and test program
all: $(LIB) $(NAME)

# Build the ft_printf library first
$(LIB):
	make -f Makefile

# Build the test program by linking with the library
$(NAME): $(OBJS) $(LIB)
	$(CC) $(CFLAGS) $(OBJS) $(LIB) -o $(NAME)

# Compile test source files to object files
%.o: %.c
	$(CC) $(CFLAGS) -c $< -o $@

# Run the test program
test: $(NAME)
	./$(NAME)

# Clean test object files and library
clean:
	rm -f $(OBJS)
	make -f Makefile clean

# Clean everything (test objects, test program, and library)
fclean: clean
	rm -f $(NAME)
	make -f Makefile fclean

# Rebuild everything from scratch
re: fclean all

# Declare phony targets
.PHONY: all test clean fclean re 